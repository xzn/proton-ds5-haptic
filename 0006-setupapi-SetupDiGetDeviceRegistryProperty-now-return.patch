From 8389d938af7a25bff61f0f4900d10e63728c2c9b Mon Sep 17 00:00:00 2001
From: JS Deck <jsdeckerido@gmail.com>
Date: Sun, 7 Dec 2025 02:55:09 -0400
Subject: [PATCH 6/9] setupapi: SetupDiGetDeviceRegistryProperty now returns
 all lower case for SPDRP_BASE_CONTAINERID.

---
 dlls/setupapi/devinst.c | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/dlls/setupapi/devinst.c b/dlls/setupapi/devinst.c
index 75ce560fa06..ec3ae01d195 100644
--- a/dlls/setupapi/devinst.c
+++ b/dlls/setupapi/devinst.c
@@ -3711,7 +3711,11 @@ BOOL WINAPI SetupDiGetDeviceRegistryPropertyA(HDEVINFO devinfo,
             SetLastError(l);
         if (RequiredSize)
             *RequiredSize = size;
+
+        if (ret && PropertyMap[Property].devPropType == DEVPROP_TYPE_GUID)
+            _strlwr((LPSTR)PropertyBuffer);
     }
+
     return ret;
 }
 
@@ -3753,7 +3757,12 @@ BOOL WINAPI SetupDiGetDeviceRegistryPropertyW(HDEVINFO devinfo,
             SetLastError(l);
         if (RequiredSize)
             *RequiredSize = size;
+
+        /* Death Stranding Director's Cut expect the containerId string to be all lower case. */
+        if (ret && PropertyMap[Property].devPropType == DEVPROP_TYPE_GUID)
+            _wcslwr((LPWSTR)PropertyBuffer);
     }
+
     return ret;
 }
 
-- 
2.52.0

